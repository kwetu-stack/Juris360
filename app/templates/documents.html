{% extends "base.html" %}{% block title %}Documents Â· Juris360{% endblock %}
{% block content %}
<h2>Documents</h2>
<form action="{{ url_for('documents.upload_document') }}" method="POST" enctype="multipart/form-data">
  <label>Choose file</label><input type="file" name="file" required>
  <label>Case Ref</label><input name="case_ref" placeholder="e.g., HCCC 102/2025">
  <label>Type</label>
  <select name="type_id">
    {% for t in types %}<option value="{{ t.id }}">{{ t.name }}</option>{% endfor %}
  </select>
  <label>Notes</label><input name="notes" placeholder="Short description">
  <button>Upload</button>
</form>
<table>
  <thead><tr><th>Name</th><th>Case</th><th>Type</th><th>Uploaded</th><th>Size</th><th>Notes</th><th>Actions</th></tr></thead>
  <tbody>
  {% for d in documents %}
    <tr>
      <td>{{ d.filename }}</td><td>{{ d.case_ref or '-' }}</td><td>{{ d.type }}</td>
      <td>{{ d.uploaded_at }}</td><td>{{ d.size }}</td><td>{{ d.notes }}</td>
      <td>
        <a href="{{ url_for('documents.download_document', id=d.id) }}">Download</a>
        <a href="{{ url_for('documents.preview_document', id=d.id) }}">Preview</a>
        <form action="{{ url_for('documents.delete_document', id=d.id) }}" method="POST" style="display:inline">
          <button onclick="return confirm('Delete this document?')">Delete</button>
        </form>
      </td>
    </tr>
  {% else %}<tr><td colspan="7">No documents.</td></tr>{% endfor %}
  </tbody>
</table>
{% endblock %}
