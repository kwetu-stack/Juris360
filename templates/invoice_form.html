{% extends 'base.html' %}{% set active='invoices' %}
{% block title %}{{ 'Edit' if item else 'New' }} Invoice · Juris360{% endblock %}
{% block content %}
<h1>{{ 'Edit' if item else 'New' }} Invoice</h1>
<form method="post">
<label>Invoice No.</label><input type="text" name="number" value="{{ item.number if item else '' }}" required>
<label>Client</label><select name="client_id" required>
{% for c in clients %}<option value="{{ c.id }}" {{ 'selected' if item and item.client_id==c.id else '' }}>{{ c.name }}</option>{% endfor %}
</select>
<label>Case (optional)</label><select name="case_id"><option value="">—</option>
{% for cs in cases %}<option value="{{ cs.id }}" {{ 'selected' if item and item.case_id==cs.id else '' }}>{{ cs.number }}</option>{% endfor %}</select>
<label>Issue Date</label><input type="date" name="issue_date" value="{{ item.issue_date if item and item.issue_date else '' }}">
<label>Due Date</label><input type="date" name="due_date" value="{{ item.due_date if item and item.due_date else '' }}">
<label>Status</label><select name="status">{% for s in ['Draft','Sent','Paid','Overdue'] %}<option value="{{ s }}" {{ 'selected' if item and item.status==s else '' }}>{{ s }}</option>{% endfor %}</select>
<label>Total Amount</label><input type="number" step="0.01" name="total_amount" value="{{ item.total_amount if item else '' }}">
<div class="actions"><button class="btn btn-primary" type="submit">Save</button>
<a class="btn btn-secondary" href="{{ url_for('invoices') }}">Cancel</a></div></form>
{% endblock %}
